<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Video Player</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="all-wrapper">
        <div class="input-wrapper">
            <input type="text" id="videoPath" class="video-path" placeholder="Enter Video Path">
            <button id="loadVideo" class="load-video">Load Video</button>
            <button id="langToggle" class="lang-toggle">日本語</button>
        </div>

        <div class="video-wrapper">
            <div id="speedIndicator" class="speed-indicator">x2</div>
            <video id="videoElement" class="video-element" src="your_video_path.mp4" controls></video>
        </div>
    </div>

    <script>
        const videoElement = document.getElementById('videoElement');
        const videoPathInput = document.getElementById('videoPath');
        const loadVideoBtn = document.getElementById('loadVideo');
        const speedIndicator = document.getElementById('speedIndicator');
        const langToggleBtn = document.getElementById('langToggle');

        let longPressTimer;
        let isEnglish = true;
        let wasPlaying = false;
        let isSpeedUp = false;

        // Press and hold to double speed | 長押しで2倍速 
        videoElement.addEventListener('mousedown', () => {
            wasPlaying = !videoElement.paused; // Save the current playback state | 現在の再生状態を保存

            longPressTimer = setTimeout(() => {
                isSpeedUp = true;
                videoElement.playbackRate = 2.0;
                speedIndicator.style.visibility = 'visible'; // Show x2 | x2を表示
            }, 500); // Long press time (500ms) | 長押し時間（500ms）
        });

        videoElement.addEventListener('mouseup', () => {
            clearTimeout(longPressTimer);
            videoElement.playbackRate = 1.0; // Return to normal speed | 通常の速度に戻す
            speedIndicator.style.visibility = 'hidden'; // Hide x2 | x2を非表示

            if (wasPlaying && isSpeedUp) {
                isSpeedUp = false;
                setTimeout(() => {
                    wasPlaying = !videoElement.paused;
                    videoElement.play(); // Continue playing if it was playing before | 以前に再生していた場合は再生を続ける
                }, 0);
            }
        });


        // Keyboard Controls | キーボードコントロール
        document.addEventListener('keydown', (event) => {
            switch (event.key) {
                case 'ArrowRight':
                    videoElement.currentTime += 5;
                    break;
                case 'ArrowLeft':
                    videoElement.currentTime -= 5;
                    break;
                case ' ':
                    event.preventDefault();
                    if (videoElement.paused) {
                        videoElement.play();
                    } else {
                        videoElement.pause();
                    }
                    break;
            }
        });

        // Ability to set video path and load | ビデオのパスを設定して読み込む機能
        loadVideoBtn.addEventListener('click', () => {
            let path = videoPathInput.value;
            path = path.replace(/['"]/g, ''); // Remove " and ' | "や'を取り除く
            if (path) {
                videoElement.src = path;
                videoElement.load();
                videoElement.play();
            }
        });

        // Language Toggle | 言語切り替え
        langToggleBtn.addEventListener('click', () => {
            isEnglish = !isEnglish;
            updateLanguage();
        });

        // Update language | 言語を更新
        function updateLanguage() {
            if (isEnglish) {
                videoPathInput.placeholder = 'Enter video path';
                loadVideoBtn.textContent = 'Load Video';
                langToggleBtn.textContent = '日本語';
                document.title = 'Custom Video Player';
            } else {
                videoPathInput.placeholder = 'ビデオのパスを入力';
                loadVideoBtn.textContent = 'ビデオを読み込む';
                langToggleBtn.textContent = 'English';
                document.title = 'カスタムビデオプレーヤー';
            }
        }
    </script>

</body>

</html>